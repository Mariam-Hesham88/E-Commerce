<section class="">
    <div class="row d-flex justify-content-center align-content-center">
        <div class="col-md-6 bg-main-light shadow p-2 my-4 rounded-4">
            <h1 class="h2 text-main py-3 text-bold">Register Now</h1>
            <form [formGroup]="registerForm" (ngSubmit)="registerSumbit()">
                <div class="m-2">
                    <label for="name">Name :</label>
                    <input
                        [ngClass]="{
                'is-valid': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
                'is-invalid': registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)}"
                        type="text" id="name" formControlName="name" class="form-control">

                    @if(registerForm.get('name')?.errors && (registerForm.get('name')?.touched) ||
                    registerForm.get('name')?.dirty){
                    <div class="alert alert-danger">
                        @if(registerForm.get('name')?.getError('required')){
                        <p class="m-0">Name Is Required</p>
                        }
                        @else if(registerForm.get('name')?.getError('minlength')){
                        <p class="m-0">Name Should be more than or equal 3 chars</p>
                        }
                        @else if(registerForm.get('name')?.getError('maxlength')){
                        <p class="m-0">Name Should be less than or equal 20 chars</p>
                        }
                    </div>
                    }
                </div>

                <div class="m-2">
                    <label for="email">Email :</label>
                    <input
                        [ngClass]="{
                'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
                'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)}"
                        type="email" id="email" formControlName="email" class="form-control">
                    @if(registerForm.get('email')?.errors && (registerForm.get('email')?.touched ||
                    registerForm.get('email')?.dirty)){
                    <div class="alert alert-danger">
                        @if(registerForm.get('email')?.getError('required')){
                        <p class="m-0">Email Is Required</p>
                        }
                        @else if(registerForm.get('email')?.getError('email')){
                        <p class="m-0">Enter Valid Email</p>
                        }
                    </div>
                    }
                </div>

                <div class="m-2">
                    <label for="phone">Phone :</label>
                    <input
                        [ngClass]="{
                'is-valid': !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
                'is-invalid': registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)}"
                        type="text" id="phone" formControlName="phone" class="form-control">
                    @if(registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched ||
                    registerForm.get('phone')?.dirty)){
                    <div class="alert alert-danger">
                        @if(registerForm.get('phone')?.getError('required')){
                        <p class="m-0">Phone Is Required</p>
                        }
                        @else if(registerForm.get('phone')?.getError('pattern')){
                        <p class="m-0">Accept only egypt phone numbers</p>
                        }
                    </div>
                    }
                </div>

                <div class="m-2">
                    <label for="password">Password :</label>
                    <input
                        [ngClass]="{
                'is-valid': !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty),
                'is-invalid': registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)}"
                        type="password" id="password" formControlName="password" class="form-control">
                    @if(registerForm.get('password')?.errors && (registerForm.get('password')?.touched ||
                    registerForm.get('password')?.dirty)){
                    <div class="alert alert-danger">
                        @if(registerForm.get('password')?.getError('required')){
                        <p class="m-0">Password Is Required</p>
                        }
                        @else if(registerForm.get('password')?.getError('pattern')){
                        <p class="m-0">must be at least 6 chars</p>
                        }
                    </div>
                    }
                </div>

                <div class="m-2">
                    <label for="rePassword">rePassword :</label>
                    <input [ngClass]="{
                'is-invalid': registerForm.get('rePassword')?.errors}" type="password" id="rePassword"
                        formControlName="rePassword" class="form-control">
                    @if(registerForm.getError('mismatch')){
                    <div class="alert alert-danger">
                        <p class="m-0">Password confirmation is incorrect</p>
                    </div>
                    }
                </div>

                <button [disabled]="registerForm.invalid || isloading" type="submit"
                    class="btn btn-main ms-auto d-block">
                    Register
                    @if(isloading){
                    <span>
                        <i class="fa fa-spin fa-spinner"></i>
                    </span>
                    }
                </button>

                @if(errorMsg){
                <p class="alert alert-danger m-0">{{errorMsg}}</p>
                }

                @if(successMsg){
                <p class="alert alert-success">Your Registeration is Success</p>
                }
            </form>
        </div>
    </div>
</section>